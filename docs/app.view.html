<!DOCTYPE html>  <html> <head>   <title>app.view.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="app.html">                 app.js               </a>                                           <a class="source" href="backbone-auth.html">                 backbone-auth.js               </a>                                           <a class="source" href="backbone-crud.html">                 backbone-crud.js               </a>                                           <a class="source" href="backbone-gravatar.html">                 backbone-gravatar.js               </a>                                           <a class="source" href="backbone-misc.html">                 backbone-misc.js               </a>                                           <a class="source" href="backbone-pubsub.html">                 backbone-pubsub.js               </a>                                           <a class="source" href="backbone-upload.html">                 backbone-upload.js               </a>                                           <a class="source" href="schemas.html">                 schemas.js               </a>                                           <a class="source" href="bootstrap.html">                 bootstrap.js               </a>                                           <a class="source" href="google.html">                 google.js               </a>                                           <a class="source" href="helpers.html">                 helpers.js               </a>                                           <a class="source" href="icons.html">                 icons.js               </a>                                           <a class="source" href="init.html">                 init.js               </a>                                           <a class="source" href="app.model.html">                 app.model.js               </a>                                           <a class="source" href="message.model.html">                 message.model.js               </a>                                           <a class="source" href="notification.model.html">                 notification.model.js               </a>                                           <a class="source" href="room.model.html">                 room.model.js               </a>                                           <a class="source" href="user.model.html">                 user.model.js               </a>                                           <a class="source" href="app.router.html">                 app.router.js               </a>                                           <a class="source" href="auth.dnode.html">                 auth.dnode.js               </a>                                           <a class="source" href="crud.dnode.html">                 crud.dnode.js               </a>                                           <a class="source" href="gravatar.dnode.html">                 gravatar.dnode.js               </a>                                           <a class="source" href="misc.dnode.html">                 misc.dnode.js               </a>                                           <a class="source" href="pubsub.dnode.html">                 pubsub.dnode.js               </a>                                           <a class="source" href="upload.dnode.html">                 upload.dnode.js               </a>                                           <a class="source" href="app.view.html">                 app.view.js               </a>                                           <a class="source" href="message.view.html">                 message.view.js               </a>                                           <a class="source" href="notification.view.html">                 notification.view.js               </a>                                           <a class="source" href="room.view.html">                 room.view.js               </a>                                           <a class="source" href="user.view.html">                 user.view.js               </a>                                           <a class="source" href="server.html">                 server.js               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               app.view.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p>Aebleskiver
   (c) 2011 Beau Sorensen
   Aebleskiver may be freely distributed under the MIT license.
   For all details and documentation:
   https://github.com/sorensen/aebleskiver</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="err">ß</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <h2>Application view</h2>             </td>             <td class="code">               <div class="highlight"><pre>    </pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Extend the Backbone 'view' object and add it to the 
namespaced view container</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="err">ß</span><span class="p">.</span><span class="nx">Views</span><span class="p">.</span><span class="nx">ApplicationView</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    </pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <h2>Templates</h2>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">template</span>             <span class="o">:</span> <span class="nx">_</span><span class="p">.</span><span class="nx">template</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#application-template&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">()),</span>
        <span class="nx">statsTemplate</span>        <span class="o">:</span> <span class="nx">_</span><span class="p">.</span><span class="nx">template</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#application-stats-template&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">()),</span>
        <span class="nx">loginTemplate</span>        <span class="o">:</span> <span class="nx">_</span><span class="p">.</span><span class="nx">template</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#login-template&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">()),</span>
        <span class="nx">signupTemplate</span>       <span class="o">:</span> <span class="nx">_</span><span class="p">.</span><span class="nx">template</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#signup-template&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">()),</span>
        <span class="nx">settingsTemplate</span>     <span class="o">:</span> <span class="nx">_</span><span class="p">.</span><span class="nx">template</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#settings-template&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">()),</span>
        <span class="nx">createRoomTemplate</span>   <span class="o">:</span> <span class="nx">_</span><span class="p">.</span><span class="nx">template</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#create-room-template&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">()),</span>
        <span class="nx">notificationTemplate</span> <span class="o">:</span> <span class="nx">_</span><span class="p">.</span><span class="nx">template</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#notification-template&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">()),</span>
        </pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <h2>Interaction events</h2>

<p>These are all interaction events between the 
user and this view's DOM interface</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">events</span> <span class="o">:</span> <span class="p">{</span>
            <span class="s1">&#39;keyup&#39;</span>              <span class="o">:</span> <span class="s1">&#39;hideOnEscape&#39;</span><span class="p">,</span>
            <span class="s1">&#39;click #show-rooms&#39;</span>  <span class="o">:</span> <span class="s1">&#39;showRooms&#39;</span><span class="p">,</span>
            <span class="s1">&#39;click #show-users&#39;</span>  <span class="o">:</span> <span class="s1">&#39;showUsers&#39;</span><span class="p">,</span>
            <span class="s1">&#39;click .cancel&#39;</span>      <span class="o">:</span> <span class="s1">&#39;hideDialogs&#39;</span><span class="p">,</span>
            <span class="s1">&#39;click #overlay&#39;</span>     <span class="o">:</span> <span class="s1">&#39;hideDialogs&#39;</span><span class="p">,</span>
            <span class="s1">&#39;click #logout&#39;</span>      <span class="o">:</span> <span class="s1">&#39;logout&#39;</span><span class="p">,</span>
            </pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Create new room form</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="s1">&#39;click #create-room&#39;</span>               <span class="o">:</span> <span class="s1">&#39;showCreateRoom&#39;</span><span class="p">,</span>
            <span class="s1">&#39;click #create-room-form .submit&#39;</span>  <span class="o">:</span> <span class="s1">&#39;createRoom&#39;</span><span class="p">,</span>
            <span class="s1">&#39;keypress #create-room-form input&#39;</span> <span class="o">:</span> <span class="s1">&#39;createRoomOnEnter&#39;</span><span class="p">,</span>
            </pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Login form</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="s1">&#39;click #login&#39;</span>               <span class="o">:</span> <span class="s1">&#39;showLogin&#39;</span><span class="p">,</span>
            <span class="s1">&#39;click #login-form .submit&#39;</span>  <span class="o">:</span> <span class="s1">&#39;authenticate&#39;</span><span class="p">,</span>
            <span class="s1">&#39;keypress #login-form input&#39;</span> <span class="o">:</span> <span class="s1">&#39;authenticateOnEnter&#39;</span><span class="p">,</span>
            </pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>Settings form</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="s1">&#39;click #settings&#39;</span>               <span class="o">:</span> <span class="s1">&#39;showSettings&#39;</span><span class="p">,</span>
            <span class="s1">&#39;click #settings-form .submit&#39;</span>  <span class="o">:</span> <span class="s1">&#39;saveSettings&#39;</span><span class="p">,</span>
            <span class="s1">&#39;keypress #settings-form input&#39;</span> <span class="o">:</span> <span class="s1">&#39;saveSettingsOnEnter&#39;</span><span class="p">,</span>
            </pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Registration form</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="s1">&#39;click #signup&#39;</span>               <span class="o">:</span> <span class="s1">&#39;showSignup&#39;</span><span class="p">,</span>
            <span class="s1">&#39;click #signup-form .submit&#39;</span>  <span class="o">:</span> <span class="s1">&#39;register&#39;</span><span class="p">,</span>
            <span class="s1">&#39;keypress #signup-form input&#39;</span> <span class="o">:</span> <span class="s1">&#39;registerOnEnter&#39;</span><span class="p">,</span>
            </pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Search form</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="s1">&#39;keypress #search&#39;</span>  <span class="o">:</span> <span class="s1">&#39;searchOnEnter&#39;</span><span class="p">,</span>
            <span class="s1">&#39;click #search-now&#39;</span> <span class="o">:</span> <span class="s1">&#39;searchOnEnter&#39;</span><span class="p">,</span>
            </pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>Friends</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="s1">&#39;click #friend-list .icon&#39;</span>   <span class="o">:</span> <span class="s1">&#39;toggleFriendList&#39;</span><span class="p">,</span>
            <span class="s1">&#39;click #favorite-list .icon&#39;</span> <span class="o">:</span> <span class="s1">&#39;toggleFavoriteList&#39;</span><span class="p">,</span>
            <span class="s1">&#39;click #start-menu .icon&#39;</span>    <span class="o">:</span> <span class="s1">&#39;toggleSidebar&#39;</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <h2>Constructor</h2>

<p>Setup the model and view interactions, unlike the 'events' 
property, the event bindings below are programmatic listeners
to model and collection changes</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">initialize</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">_</span><span class="p">.</span><span class="nx">bindAll</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> 
                <span class="s1">&#39;render&#39;</span><span class="p">,</span> <span class="s1">&#39;toggleNav&#39;</span><span class="p">,</span> <span class="s1">&#39;statistics&#39;</span><span class="p">,</span>
                <span class="s1">&#39;addRoom&#39;</span><span class="p">,</span> <span class="s1">&#39;showCreateRoom&#39;</span><span class="p">,</span> <span class="s1">&#39;createRoom&#39;</span><span class="p">,</span> <span class="s1">&#39;allRooms&#39;</span><span class="p">,</span> <span class="s1">&#39;roomsReady&#39;</span><span class="p">,</span>
                <span class="s1">&#39;addUser&#39;</span><span class="p">,</span> <span class="s1">&#39;allUsers&#39;</span><span class="p">,</span> <span class="s1">&#39;usersReady&#39;</span><span class="p">,</span> <span class="s1">&#39;authenticate&#39;</span><span class="p">,</span> <span class="s1">&#39;register&#39;</span><span class="p">,</span> <span class="s1">&#39;logout&#39;</span><span class="p">,</span>
                <span class="s1">&#39;toggleSidebar&#39;</span><span class="p">,</span>
                <span class="s1">&#39;toggleFriendList&#39;</span><span class="p">,</span> <span class="s1">&#39;allFriends&#39;</span><span class="p">,</span> <span class="s1">&#39;addFriend&#39;</span><span class="p">,</span>
                <span class="s1">&#39;toggleFavoriteList&#39;</span><span class="p">,</span> <span class="s1">&#39;allFavorites&#39;</span><span class="p">,</span> <span class="s1">&#39;addFavorite&#39;</span><span class="p">,</span>
                <span class="s1">&#39;conversationsReady&#39;</span><span class="p">,</span> <span class="s1">&#39;allConversations&#39;</span><span class="p">,</span> <span class="s1">&#39;addConversation&#39;</span>
            <span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Create and bind the application model to this view,
then create a circular reference for traversing</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">this</span><span class="p">.</span><span class="nx">model</span> <span class="o">=</span> <span class="k">new</span> <span class="err">ß</span><span class="p">.</span><span class="nx">Models</span><span class="p">.</span><span class="nx">ApplicationModel</span><span class="p">();</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">view</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
            </pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Application model event bindings</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;change&#39;</span><span class="p">,</span>    <span class="k">this</span><span class="p">.</span><span class="nx">statistics</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;subscribe&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">ready</span><span class="p">);</span>
            </pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>User collection event bindings</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;subscribe&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">usersReady</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;add&#39;</span><span class="p">,</span>       <span class="k">this</span><span class="p">.</span><span class="nx">addUser</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;add&#39;</span><span class="p">,</span>       <span class="k">this</span><span class="p">.</span><span class="nx">statistics</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;change&#39;</span><span class="p">,</span>    <span class="k">this</span><span class="p">.</span><span class="nx">statistics</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;reset&#39;</span><span class="p">,</span>     <span class="k">this</span><span class="p">.</span><span class="nx">allUsers</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;reset&#39;</span><span class="p">,</span>     <span class="k">this</span><span class="p">.</span><span class="nx">statistics</span><span class="p">);</span>
            </pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>Room collection event bindings</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">rooms</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;subscribe&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">roomsReady</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">rooms</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;add&#39;</span><span class="p">,</span>       <span class="k">this</span><span class="p">.</span><span class="nx">addRoom</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">rooms</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;add&#39;</span><span class="p">,</span>       <span class="k">this</span><span class="p">.</span><span class="nx">statistics</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">rooms</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;change&#39;</span><span class="p">,</span>    <span class="k">this</span><span class="p">.</span><span class="nx">statistics</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">rooms</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;reset&#39;</span><span class="p">,</span>     <span class="k">this</span><span class="p">.</span><span class="nx">allRooms</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">rooms</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;reset&#39;</span><span class="p">,</span>     <span class="k">this</span><span class="p">.</span><span class="nx">statistics</span><span class="p">);</span>
            </pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Conversation event bindings</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="err">ß</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">conversations</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;subscribe&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">coversationsReady</span><span class="p">);</span>
            <span class="err">ß</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">conversations</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;add&#39;</span><span class="p">,</span>       <span class="k">this</span><span class="p">.</span><span class="nx">addConversation</span><span class="p">);</span>
            <span class="err">ß</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">conversations</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;reset&#39;</span><span class="p">,</span>     <span class="k">this</span><span class="p">.</span><span class="nx">allConversation</span><span class="p">);</span>
            
            <span class="k">this</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
            </pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>Assign pre-pouplated locals from Express</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">this</span><span class="p">.</span><span class="nx">sid</span>              <span class="o">=</span> <span class="err">ß</span><span class="p">.</span><span class="nx">token</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">port</span>             <span class="o">=</span> <span class="err">ß</span><span class="p">.</span><span class="nx">port</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">version</span>          <span class="o">=</span> <span class="err">ß</span><span class="p">.</span><span class="nx">version</span><span class="p">;</span>
            </pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>Set shortcuts to collection DOM</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">this</span><span class="p">.</span><span class="nx">searchInput</span>      <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#search&#39;</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">userList</span>         <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#users&#39;</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">roomList</span>         <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#rooms&#39;</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">sidebar</span>          <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#sidebar&#39;</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">mainContent</span>      <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#main-content&#39;</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">loginDialog</span>      <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#login-dialog&#39;</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">signupDialog</span>     <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#signup-dialog&#39;</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">createRoomDialog</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#create-room-dialog&#39;</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">settingsDialog</span>   <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#settings-dialog&#39;</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">overlay</span>          <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#overlay&#39;</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">roomName</span>         <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;input[name=&quot;room&quot;]&#39;</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">friends</span>          <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#friend-list&#39;</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">friendList</span>       <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.friends&#39;</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">favorites</span>        <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#favorite-list&#39;</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">favoriteList</span>     <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.favorites&#39;</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">conversationList</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#conversations&#39;</span><span class="p">);</span>
            </pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>Navigation items for authentication toggling</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">this</span><span class="p">.</span><span class="nx">nav</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">signup</span>     <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#signup&#39;</span><span class="p">),</span>
                <span class="nx">login</span>      <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#login&#39;</span><span class="p">),</span>
                <span class="nx">logout</span>     <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#logout&#39;</span><span class="p">),</span>
                <span class="nx">settings</span>   <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#settings&#39;</span><span class="p">),</span>
                <span class="nx">createRoom</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#create-room&#39;</span><span class="p">)</span>
            <span class="p">};</span>
            </pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>Internal sidebar settings, pull settings
from the cookie and bootstrap if required</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">this</span><span class="p">.</span><span class="nx">menuOpen</span>      <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s1">&#39;menuOpen&#39;</span><span class="p">)</span>      <span class="o">||</span> <span class="s1">&#39;false&#39;</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">friendsOpen</span>   <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s1">&#39;friendsOpen&#39;</span><span class="p">)</span>   <span class="o">||</span> <span class="s1">&#39;false&#39;</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">favoritesOpen</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s1">&#39;favoritesOpen&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;false&#39;</span><span class="p">;</span>
            
            <span class="k">this</span><span class="p">.</span><span class="nx">nav</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">nav</span><span class="p">.</span><span class="nx">logout</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
            
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">menuOpen</span> <span class="o">===</span> <span class="s1">&#39;true&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;menuOpen&#39;</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">friendsOpen</span> <span class="o">===</span> <span class="s1">&#39;true&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">friends</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">favoritesOpen</span> <span class="o">===</span> <span class="s1">&#39;true&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">favorites</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <h3>render</h3>

<p>Render template contents onto the DOM, adding
any effects afterwards, such as icons</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">render</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">content</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">toJSON</span><span class="p">(),</span>
                <span class="nx">view</span>    <span class="o">=</span> <span class="nx">Mustache</span><span class="p">.</span><span class="nx">to_html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">template</span><span class="p">(),</span> <span class="nx">content</span><span class="p">),</span>
                <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="nx">width</span>  <span class="o">:</span> <span class="mi">20</span><span class="p">,</span>
                    <span class="nx">height</span> <span class="o">:</span> <span class="mi">20</span><span class="p">,</span>
                    <span class="nx">fill</span> <span class="o">:</span> <span class="p">{</span>
                        <span class="nx">fill</span>   <span class="o">:</span> <span class="s2">&quot;#333&quot;</span><span class="p">,</span> 
                        <span class="nx">stroke</span> <span class="o">:</span> <span class="s2">&quot;none&quot;</span>
                    <span class="p">},</span>
                    <span class="nx">none</span> <span class="o">:</span> <span class="p">{</span>
                        <span class="nx">fill</span>    <span class="o">:</span> <span class="s2">&quot;#000&quot;</span><span class="p">,</span> 
                        <span class="nx">opacity</span> <span class="o">:</span> <span class="mi">0</span>
                    <span class="p">}</span>
                <span class="p">},</span>
                <span class="nx">highlight</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="nx">fill</span> <span class="o">:</span> <span class="p">{</span>
                        <span class="nx">fill</span>   <span class="o">:</span> <span class="s2">&quot;#A90000&quot;</span><span class="p">,</span> 
                        <span class="nx">stroke</span> <span class="o">:</span> <span class="s2">&quot;none&quot;</span>
                    <span class="p">},</span>
                    <span class="nx">none</span> <span class="o">:</span> <span class="p">{</span>
                        <span class="nx">fill</span>    <span class="o">:</span> <span class="s2">&quot;#9A0000&quot;</span><span class="p">,</span> 
                        <span class="nx">opacity</span> <span class="o">:</span> <span class="mi">0</span>
                    <span class="p">}</span>
                <span class="p">};</span>
            
            <span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">view</span><span class="p">);</span>
            </pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>Enable access keys</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nx">KeyCandy</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="s1">&#39;#application&#39;</span><span class="p">,</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>Set the control key and menu key to
'SHIFT', so that it does not conflict
with native accesskeys. Setting both
keys to the same code will also enable 
an instant toggle effect on the tooltips</p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="nx">controlKey</span> <span class="o">:</span> <span class="mi">16</span><span class="p">,</span>
                <span class="nx">removeKey</span>  <span class="o">:</span> <span class="mi">16</span>
            <span class="p">});</span>
            </pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>Create the icons for this view</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nx">_</span>
                <span class="p">.</span><span class="nx">icon</span><span class="p">(</span><span class="s1">&#39;home&#39;</span><span class="p">,</span> <span class="s1">&#39;home&#39;</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">icon</span><span class="p">(</span><span class="s1">&#39;run&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">icon</span><span class="p">(</span><span class="s1">&#39;power&#39;</span><span class="p">,</span> <span class="s1">&#39;start-menu-icon&#39;</span><span class="p">,</span> <span class="p">{</span>
                    <span class="nx">fill</span> <span class="o">:</span> <span class="p">{</span>
                        <span class="nx">fill</span>   <span class="o">:</span> <span class="s2">&quot;#333&quot;</span><span class="p">,</span> 
                        <span class="nx">stroke</span> <span class="o">:</span> <span class="s2">&quot;none&quot;</span>
                    <span class="p">},</span>
                    <span class="nx">none</span> <span class="o">:</span> <span class="p">{</span>
                        <span class="nx">fill</span>    <span class="o">:</span> <span class="s2">&quot;#000&quot;</span><span class="p">,</span> 
                        <span class="nx">opacity</span> <span class="o">:</span> <span class="mi">0</span>
                    <span class="p">}</span>
                <span class="p">})</span>
                <span class="p">.</span><span class="nx">icon</span><span class="p">(</span><span class="s1">&#39;slideshare&#39;</span><span class="p">,</span> <span class="s1">&#39;friends-icon&#39;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">icon</span><span class="p">(</span><span class="s1">&#39;bookmark&#39;</span><span class="p">,</span>   <span class="s1">&#39;favorites-icon&#39;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">icon</span><span class="p">(</span><span class="s1">&#39;i&#39;</span><span class="p">,</span>          <span class="s1">&#39;stats-icon&#39;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">icon</span><span class="p">(</span><span class="s1">&#39;github&#39;</span><span class="p">,</span>     <span class="s1">&#39;github-icon&#39;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">icon</span><span class="p">(</span><span class="s1">&#39;chat&#39;</span><span class="p">,</span>       <span class="s1">&#39;show-rooms&#39;</span><span class="p">,</span> <span class="nx">highlight</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">icon</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">,</span>      <span class="s1">&#39;show-users&#39;</span><span class="p">,</span> <span class="nx">highlight</span><span class="p">);</span>
            
            <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <h3>statistics</h3>

<p>Update the DOM view with the current application
statistics, this method is seperated and short for use
whenever child collections are updated</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">statistics</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">totalOnline</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">online</span>       <span class="o">||</span> <span class="mi">0</span><span class="p">,</span>
                <span class="nx">totalUsers</span>  <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">length</span> <span class="o">||</span> <span class="mi">0</span><span class="p">,</span>
                <span class="nx">totalRooms</span>  <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">rooms</span><span class="p">.</span><span class="nx">length</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
            
            <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#app-stats&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">Mustache</span><span class="p">.</span><span class="nx">to_html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">statsTemplate</span><span class="p">(),</span> <span class="p">{</span>
                <span class="nx">totalOnline</span> <span class="o">:</span> <span class="nx">totalOnline</span><span class="p">,</span>
                <span class="nx">totalUsers</span>  <span class="o">:</span> <span class="nx">totalUsers</span><span class="p">,</span>
                <span class="nx">totalRooms</span>  <span class="o">:</span> <span class="nx">totalRooms</span><span class="p">,</span>
                <span class="nx">version</span>     <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">version</span>
            <span class="p">}));</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <h3>ready</h3>

<p>The model has been subscribed to, and is now
synchronized with the 'Server'</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">ready</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <h3>hideOnEscape</h3>

<p>Close modal keystroke listener</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">hideOnEscape</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="mi">27</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">hideDialogs</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <h3>toggleSidebar</h3>

<p>Open or close the sidebar menu, setting a cookie
to remember the setting</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">toggleSidebar</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">menuOpen</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">menuOpen</span> <span class="o">=</span> <span class="s1">&#39;false&#39;</span><span class="p">;</span>
                <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s1">&#39;menuOpen&#39;</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">menuOpen</span> <span class="o">=</span> <span class="s1">&#39;true&#39;</span><span class="p">;</span>
                <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;menuOpen&#39;</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s1">&#39;menuOpen&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">menuOpen</span><span class="p">);</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <h3>toggleFriendList</h3>

<p>Open or close the friend list, setting a cookie
to remember the setting</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">toggleFriendList</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">friendsOpen</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">friendsOpen</span> <span class="o">=</span> <span class="s1">&#39;false&#39;</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">friends</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">friendsOpen</span> <span class="o">=</span> <span class="s1">&#39;true&#39;</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">friends</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">);</span>
                
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">favoritesOpen</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">favoritesOpen</span> <span class="o">=</span> <span class="s1">&#39;false&#39;</span><span class="p">;</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">favorites</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s1">&#39;favoritesOpen&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">favoritesOpen</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s1">&#39;friendsOpen&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">friendsOpen</span><span class="p">);</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <h3>allFriends</h3>

<p>All rooms have been loaded into collection</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">allFriends</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">friends</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">friendList</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
            <span class="err">ß</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">friends</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">addFriend</span><span class="p">);</span>
            </pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <p>Refresh model statistics</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">this</span><span class="p">.</span><span class="nx">statistics</span><span class="p">();</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <h3>addFriend</h3>

<p>Add a single friend o the current veiw</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">addFriend</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">friend</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">view</span> <span class="o">=</span> <span class="k">new</span> <span class="err">ß</span><span class="p">.</span><span class="nx">Views</span><span class="p">.</span><span class="nx">FriendView</span><span class="p">({</span>
                <span class="nx">model</span> <span class="o">:</span> <span class="nx">friend</span>
            <span class="p">}).</span><span class="nx">render</span><span class="p">();</span>
            
            <span class="k">this</span><span class="p">.</span><span class="nx">friendList</span>
                <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">view</span><span class="p">.</span><span class="nx">el</span><span class="p">);</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <h3>toggleFavoriteList</h3>

<p>See: toggleFriendList for explanation</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">toggleFavoriteList</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">favoritesOpen</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">favoritesOpen</span> <span class="o">=</span> <span class="s1">&#39;false&#39;</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">favorites</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">favoritesOpen</span> <span class="o">=</span> <span class="s1">&#39;true&#39;</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">favorites</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">);</span>
                
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">friendsOpen</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">friendsOpen</span> <span class="o">=</span> <span class="s1">&#39;false&#39;</span><span class="p">;</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">friends</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s1">&#39;favoritesOpen&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">favoritesOpen</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s1">&#39;friendsOpen&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">friendsOpen</span><span class="p">);</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-35">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-35">&#182;</a>               </div>               <h3>allFavorites</h3>

<p>All rooms have been loaded into collection</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">allFavorites</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">favorites</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">favoriteList</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
            <span class="err">ß</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">favorites</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">addFavorite</span><span class="p">);</span>
            </pre></div>             </td>           </tr>                               <tr id="section-36">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-36">&#182;</a>               </div>               <p>Refresh model statistics</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">this</span><span class="p">.</span><span class="nx">statistics</span><span class="p">();</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-37">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-37">&#182;</a>               </div>               <h3>addFavorite</h3>

<p>Add a single room room to the current veiw</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">addFavorite</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">favorite</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">view</span> <span class="o">=</span> <span class="k">new</span> <span class="err">ß</span><span class="p">.</span><span class="nx">Views</span><span class="p">.</span><span class="nx">RoomView</span><span class="p">({</span>
                <span class="nx">model</span> <span class="o">:</span> <span class="nx">favorite</span>
            <span class="p">}).</span><span class="nx">render</span><span class="p">();</span>
            
            <span class="k">this</span><span class="p">.</span><span class="nx">favoriteList</span>
                <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">view</span><span class="p">.</span><span class="nx">el</span><span class="p">);</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-38">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-38">&#182;</a>               </div>               <h3>conversationsReady</h3>

<p>Conversations have been subscribed to</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">conversationsReady</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">resp</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-39">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-39">&#182;</a>               </div>               <p>Placeholder</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-40">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-40">&#182;</a>               </div>               <h3>allConversations</h3>

<p>All rooms have been loaded into collection</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">allConversations</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">friends</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">conversationList</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
            <span class="err">ß</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">conversations</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">addConversation</span><span class="p">);</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-41">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-41">&#182;</a>               </div>               <h3>addConversation</h3>

<p>Add a single friend o the current veiw</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">addConversation</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">convo</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">view</span> <span class="o">=</span> <span class="k">new</span> <span class="err">ß</span><span class="p">.</span><span class="nx">Views</span><span class="p">.</span><span class="nx">ConversationView</span><span class="p">({</span>
                <span class="nx">model</span> <span class="o">:</span> <span class="nx">convo</span>
            <span class="p">}).</span><span class="nx">render</span><span class="p">();</span>
            
            <span class="k">this</span><span class="p">.</span><span class="nx">conversationList</span>
                <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">view</span><span class="p">.</span><span class="nx">el</span><span class="p">);</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-42">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-42">&#182;</a>               </div>               <h3>searchOnEnter</h3>

<p>Create room keystroke listener, throttled function
returned to reduce load on the 'Server'</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">searchOnEnter</span> <span class="o">:</span> <span class="nx">_</span><span class="p">.</span><span class="nx">debounce</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">self</span>  <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
                <span class="nx">input</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">searchInput</span><span class="p">.</span><span class="nx">val</span><span class="p">(),</span>
                <span class="nx">query</span> <span class="o">=</span> <span class="p">(</span><span class="nx">input</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">?</span> <span class="p">{}</span> <span class="o">:</span> <span class="p">{</span>
                    <span class="nx">keywords</span> <span class="o">:</span> <span class="p">{</span> <span class="nx">$in</span> <span class="o">:</span> <span class="p">[</span> <span class="nx">input</span> <span class="p">]</span> <span class="p">}</span>
                <span class="p">};</span>
            
            <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">rooms</span><span class="p">.</span><span class="nx">fetch</span><span class="p">({</span>
                <span class="nx">query</span> <span class="o">:</span> <span class="nx">query</span><span class="p">,</span>
                <span class="nx">error</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">code</span><span class="p">,</span> <span class="nx">msg</span><span class="p">,</span> <span class="nx">opt</span><span class="p">)</span> <span class="p">{</span>
                <span class="p">},</span>
                <span class="nx">finished</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">resp</span><span class="p">)</span> <span class="p">{</span>
                <span class="p">}</span>
            <span class="p">});</span>
            
        <span class="p">},</span> <span class="mi">1000</span><span class="p">),</span>
        </pre></div>             </td>           </tr>                               <tr id="section-43">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-43">&#182;</a>               </div>               <h3>toggleNav</h3>

<p>Alternate navigation based on user authentication</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">toggleNav</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">nav</span><span class="p">.</span><span class="nx">signup</span><span class="p">.</span><span class="nx">fadeOut</span><span class="p">(</span><span class="mi">150</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">nav</span><span class="p">.</span><span class="nx">login</span><span class="p">.</span><span class="nx">fadeOut</span><span class="p">(</span><span class="mi">150</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">nav</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">150</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">nav</span><span class="p">.</span><span class="nx">logout</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">150</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">nav</span><span class="p">.</span><span class="nx">createRoom</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">150</span><span class="p">);</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-44">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-44">&#182;</a>               </div>               <h3>hideDialogs</h3>

<p>Remove all defined dialoges from the view</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">hideDialogs</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.dialog&#39;</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">overlay</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-45">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-45">&#182;</a>               </div>               <h3>roomsReady</h3>

<p>Room collection has been subscribed to</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">roomsReady</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-46">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-46">&#182;</a>               </div>               <p>Placeholder</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-47">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-47">&#182;</a>               </div>               <h3>allRooms</h3>

<p>All rooms have been loaded into collection</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">allRooms</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">rooms</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">roomList</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">rooms</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">addRoom</span><span class="p">);</span>
            </pre></div>             </td>           </tr>                               <tr id="section-48">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-48">&#182;</a>               </div>               <p>Refresh model statistics</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">this</span><span class="p">.</span><span class="nx">statistics</span><span class="p">();</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-49">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-49">&#182;</a>               </div>               <h3>showRooms</h3>

<p>Show the sidebar user list</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">showRooms</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">userList</span><span class="p">.</span><span class="nx">fadeOut</span><span class="p">(</span><span class="mi">150</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">roomList</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">150</span><span class="p">);</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-50">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-50">&#182;</a>               </div>               <h3>addRoom</h3>

<p>Add a single room room to the current veiw</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">addRoom</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">room</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">view</span> <span class="o">=</span> <span class="k">new</span> <span class="err">ß</span><span class="p">.</span><span class="nx">Views</span><span class="p">.</span><span class="nx">RoomView</span><span class="p">({</span>
                <span class="nx">model</span> <span class="o">:</span> <span class="nx">room</span>
            <span class="p">}).</span><span class="nx">render</span><span class="p">();</span>
            
            <span class="k">this</span><span class="p">.</span><span class="nx">roomList</span>
                <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">view</span><span class="p">.</span><span class="nx">el</span><span class="p">);</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-51">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-51">&#182;</a>               </div>               <h3>deactivateRoom</h3>

<p>Remove the current active room from the view,
as well as the DOM</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">deactivateRoom</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">mainContent</span>
                <span class="p">.</span><span class="nx">fadeOut</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
                    <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
                <span class="p">});</span>
            </pre></div>             </td>           </tr>                               <tr id="section-52">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-52">&#182;</a>               </div>               <p>Join Channel</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">this</span><span class="p">.</span><span class="nx">activeRoom</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">activeRoom</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-53">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-53">&#182;</a>               </div>               <h3>activateRoom</h3>

<p>Set the target room to this view's active 
room, setting it to the main DOM view</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">activateRoom</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-54">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-54">&#182;</a>               </div>               <p>Should probably hide room instead, maybe 
minimize it to the bottom toolbar</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">this</span><span class="p">.</span><span class="nx">deactivateRoom</span><span class="p">();</span>
            </pre></div>             </td>           </tr>                               <tr id="section-55">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-55">&#182;</a>               </div>               <p>Get model by slug</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="kd">var</span> <span class="nx">model</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">rooms</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">room</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">room</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;slug&#39;</span><span class="p">)</span> <span class="o">===</span> <span class="nx">params</span><span class="p">;</span>
            <span class="p">});</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">model</span> <span class="o">||</span> <span class="o">!</span><span class="nx">model</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
                <span class="nx">Backbone</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">saveLocation</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">);</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>
            </pre></div>             </td>           </tr>                               <tr id="section-56">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-56">&#182;</a>               </div>               <p>Create a new main room view</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">this</span><span class="p">.</span><span class="nx">activeRoom</span> <span class="o">=</span> <span class="k">new</span> <span class="err">ß</span><span class="p">.</span><span class="nx">Views</span><span class="p">.</span><span class="nx">RoomMainView</span><span class="p">({</span>
                <span class="nx">model</span> <span class="o">:</span> <span class="nx">model</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="p">}).</span><span class="nx">render</span><span class="p">();</span>
            </pre></div>             </td>           </tr>                               <tr id="section-57">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-57">&#182;</a>               </div>               <p>Provide a way for the room to access this
view so that it may close itself, ect..</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">this</span><span class="p">.</span><span class="nx">activeRoom</span><span class="p">.</span><span class="nx">view</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
            
            <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">mainContent</span>
                <span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
                    <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">activeRoom</span><span class="p">.</span><span class="nx">el</span><span class="p">);</span>
                    <span class="nx">self</span><span class="p">.</span><span class="nx">activeRoom</span><span class="p">.</span><span class="nx">messageList</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">(</span>
                    </pre></div>             </td>           </tr>                               <tr id="section-58">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-58">&#182;</a>               </div>               <p>Scroll to the bottom of the message window</p>             </td>             <td class="code">               <div class="highlight"><pre>                        <span class="nx">self</span><span class="p">.</span><span class="nx">activeRoom</span><span class="p">.</span><span class="nx">messageList</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">scrollHeight</span>
                    <span class="p">);</span>
                </pre></div>             </td>           </tr>                               <tr id="section-59">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-59">&#182;</a>               </div>               <p>Create the icons for this view, should be done 
on the room view, but the app needs to load it 
into view first before icons can be loaded.</p>             </td>             <td class="code">               <div class="highlight"><pre>                    <span class="nx">_</span><span class="p">.</span><span class="nx">icon</span><span class="p">(</span><span class="s1">&#39;view&#39;</span><span class="p">,</span>   <span class="s1">&#39;add-favorite&#39;</span><span class="p">)</span>
                     <span class="p">.</span><span class="nx">icon</span><span class="p">(</span><span class="s1">&#39;noview&#39;</span><span class="p">,</span> <span class="s1">&#39;remove-favorite&#39;</span><span class="p">)</span>
                     <span class="p">.</span><span class="nx">icon</span><span class="p">(</span><span class="s1">&#39;cross&#39;</span><span class="p">,</span>  <span class="s1">&#39;leave-room&#39;</span><span class="p">)</span>
                     <span class="p">.</span><span class="nx">icon</span><span class="p">(</span><span class="s1">&#39;quote&#39;</span><span class="p">,</span>  <span class="s1">&#39;message-submit&#39;</span><span class="p">);</span>
                    
                    <span class="k">delete</span> <span class="nx">self</span><span class="p">;</span>
                <span class="p">})</span>
                <span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;input[name=&quot;message&quot;]&#39;</span><span class="p">).</span><span class="nx">focus</span><span class="p">();</span>
            
            <span class="nx">model</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">view</span> <span class="o">&amp;&amp;</span> <span class="nx">model</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">view</span><span class="p">.</span><span class="nx">activate</span><span class="p">();</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-60">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-60">&#182;</a>               </div>               <h3>createRoom</h3>

<p>Create new room room</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">createRoom</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-61">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-61">&#182;</a>               </div>               <p>User input</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="kd">var</span> <span class="nx">name</span>        <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;input[name=&quot;room&quot;]&#39;</span><span class="p">),</span>
                <span class="nx">restricted</span>  <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;input[name=&quot;restricted&quot;]&#39;</span><span class="p">),</span>
                <span class="nx">description</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;textarea[name=&quot;description&quot;]&#39;</span><span class="p">);</span>
            </pre></div>             </td>           </tr>                               <tr id="section-62">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-62">&#182;</a>               </div>               <p>Validation</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">name</span><span class="p">.</span><span class="nx">val</span><span class="p">())</span> <span class="k">return</span><span class="p">;</span>
            </pre></div>             </td>           </tr>                               <tr id="section-63">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-63">&#182;</a>               </div>               <p>Delegate to Backbone.sync</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">createRoom</span><span class="p">({</span>
                <span class="nx">name</span>        <span class="o">:</span> <span class="nx">name</span><span class="p">.</span><span class="nx">val</span><span class="p">(),</span>
                <span class="nx">user_id</span>     <span class="o">:</span> <span class="err">ß</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="err">ß</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
                <span class="nx">restricted</span>  <span class="o">:</span> <span class="nx">restricted</span><span class="p">.</span><span class="nx">val</span><span class="p">(),</span>
                <span class="nx">description</span> <span class="o">:</span> <span class="nx">description</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span>
            <span class="p">});</span>
            </pre></div>             </td>           </tr>                               <tr id="section-64">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-64">&#182;</a>               </div>               <p>Should probably pass this in a success function</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">this</span><span class="p">.</span><span class="nx">createRoomDialog</span><span class="p">.</span><span class="nx">fadeOut</span><span class="p">(</span><span class="mi">150</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">overlay</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
            </pre></div>             </td>           </tr>                               <tr id="section-65">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-65">&#182;</a>               </div>               <p>Reset fields</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nx">name</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
            <span class="nx">restricted</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
            <span class="nx">description</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-66">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-66">&#182;</a>               </div>               <h3>createRoomOnEnter</h3>

<p>Create room keystroke listener</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">createRoomOnEnter</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="mi">13</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">createRoom</span><span class="p">();</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-67">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-67">&#182;</a>               </div>               <h3>showCreateRoom</h3>

<p>Show the login form</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">showCreateRoom</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">hideDialogs</span><span class="p">();</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">overlay</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">150</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">createRoomDialog</span>
                <span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">Mustache</span><span class="p">.</span><span class="nx">to_html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">createRoomTemplate</span><span class="p">()))</span>
                <span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
                </pre></div>             </td>           </tr>                               <tr id="section-68">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-68">&#182;</a>               </div>               <p>Apply happy validation schema, this might be 
better placed and only accessed here, as the 
DOM elements must exist before they can be happy</p>             </td>             <td class="code">               <div class="highlight"><pre>                    <span class="nx">self</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#create-room-form&#39;</span><span class="p">).</span><span class="nx">isHappy</span><span class="p">({</span>
                        <span class="nx">fields</span> <span class="o">:</span> <span class="p">{</span>
                            <span class="s1">&#39;#create-room-name&#39;</span> <span class="o">:</span> <span class="p">{</span>
                                <span class="nx">required</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                                <span class="nx">message</span>  <span class="o">:</span> <span class="s1">&#39;Please name this room&#39;</span>
                            <span class="p">},</span>
                            <span class="s1">&#39;#create-room-description&#39;</span> <span class="o">:</span> <span class="p">{</span>
                                <span class="nx">required</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                                <span class="nx">message</span>  <span class="o">:</span> <span class="s1">&#39;Give some info about this room&#39;</span>
                            <span class="p">}</span>
                        <span class="p">},</span>
                        <span class="nx">submitButton</span> <span class="o">:</span> <span class="s1">&#39;#create-room-submit&#39;</span><span class="p">,</span>
                        <span class="nx">unHappy</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                            <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Create room is unhappy. :(&#39;</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">});</span>
                <span class="p">})</span>
                <span class="p">.</span><span class="nx">draggable</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;input[name=&quot;room&quot;]&#39;</span><span class="p">).</span><span class="nx">focus</span><span class="p">();</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-69">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-69">&#182;</a>               </div>               <h3>usersReady</h3>

<p>Users collection has been subscribed to</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">usersReady</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-70">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-70">&#182;</a>               </div>               <p>Online user test</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="err">ß</span><span class="p">.</span><span class="nx">Server</span><span class="p">.</span><span class="nx">onlineUsers</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">resp</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-71">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-71">&#182;</a>               </div>               <p>Placeholder</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="p">});</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-72">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-72">&#182;</a>               </div>               <h3>deactivateRoom</h3>

<p>Remove user profile from DOM and view</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">deactivateUser</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">mainContent</span>
                <span class="p">.</span><span class="nx">fadeOut</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
                    <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
                <span class="p">});</span>
                
            <span class="k">this</span><span class="p">.</span><span class="nx">activeUser</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">activeUser</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-73">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-73">&#182;</a>               </div>               <h3>activateUser</h3>

<p>Show the user profile / main view</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">activateUser</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">deactivateUser</span><span class="p">();</span>
            </pre></div>             </td>           </tr>                               <tr id="section-74">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-74">&#182;</a>               </div>               <p>Get model by ID</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="kd">var</span> <span class="nx">model</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">room</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">room</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span> <span class="o">===</span> <span class="nx">params</span>
                    <span class="o">||</span> <span class="nx">room</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span> <span class="o">===</span> <span class="nx">params</span><span class="p">;</span>
            <span class="p">});</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">model</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">Backbone</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">saveLocation</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">);</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>
            
            <span class="k">this</span><span class="p">.</span><span class="nx">activeUser</span> <span class="o">=</span> <span class="k">new</span> <span class="err">ß</span><span class="p">.</span><span class="nx">Views</span><span class="p">.</span><span class="nx">UserMainView</span><span class="p">({</span>
                <span class="nx">model</span> <span class="o">:</span> <span class="nx">model</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="p">}).</span><span class="nx">render</span><span class="p">();</span>
            </pre></div>             </td>           </tr>                               <tr id="section-75">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-75">&#182;</a>               </div>               <p>Make view accessable to inner-view</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">this</span><span class="p">.</span><span class="nx">activeUser</span><span class="p">.</span><span class="nx">view</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
            
            <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">mainContent</span>
                <span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
                    <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
                        <span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">activeUser</span><span class="p">.</span><span class="nx">el</span><span class="p">)</span>
                        <span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;.avatar&#39;</span><span class="p">)</span>
                        <span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">1500</span><span class="p">);</span>
                </pre></div>             </td>           </tr>                               <tr id="section-76">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-76">&#182;</a>               </div>               <p>Create the icons for this view, should be done 
on the room view, but the app needs to load it 
into view first before icons can be loaded.</p>             </td>             <td class="code">               <div class="highlight"><pre>                    <span class="nx">_</span>
                        <span class="p">.</span><span class="nx">icon</span><span class="p">(</span><span class="s1">&#39;star&#39;</span><span class="p">,</span>  <span class="s1">&#39;add-friend&#39;</span><span class="p">)</span>
                        <span class="p">.</span><span class="nx">icon</span><span class="p">(</span><span class="s1">&#39;star2&#39;</span><span class="p">,</span> <span class="s1">&#39;remove-friend&#39;</span><span class="p">)</span>
                        <span class="p">.</span><span class="nx">icon</span><span class="p">(</span><span class="s1">&#39;mail&#39;</span><span class="p">,</span>  <span class="s1">&#39;send-message&#39;</span><span class="p">)</span>
                        <span class="p">.</span><span class="nx">icon</span><span class="p">(</span><span class="s1">&#39;cross&#39;</span><span class="p">,</span> <span class="s1">&#39;leave-profile&#39;</span><span class="p">)</span>
                        <span class="p">.</span><span class="nx">icon</span><span class="p">(</span><span class="s1">&#39;quote&#39;</span><span class="p">,</span> <span class="s1">&#39;post-submit&#39;</span><span class="p">);</span>
                <span class="p">})</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-77">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-77">&#182;</a>               </div>               <h3>showSettings</h3>

<p>Show the login form</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">showSettings</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">hideDialogs</span><span class="p">();</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">overlay</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">150</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">settingsDialog</span>
                <span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">Mustache</span><span class="p">.</span><span class="nx">to_html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">settingsTemplate</span><span class="p">(),</span> <span class="err">ß</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">toJSON</span><span class="p">()))</span>
                <span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                </pre></div>             </td>           </tr>                               <tr id="section-78">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-78">&#182;</a>               </div>               <p>Apply happy validation schema, this might be 
better placed and only accessed here, as the 
DOM elements must exist before they can be happy</p>             </td>             <td class="code">               <div class="highlight"><pre>                    <span class="nx">self</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#settings-form&#39;</span><span class="p">).</span><span class="nx">isHappy</span><span class="p">({</span>
                        <span class="nx">fields</span> <span class="o">:</span> <span class="p">{</span>
                            <span class="s1">&#39;#settings-username&#39;</span> <span class="o">:</span> <span class="p">{</span>
                                <span class="nx">required</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                                <span class="nx">message</span>  <span class="o">:</span> <span class="s1">&#39;What should we call you?&#39;</span>
                            <span class="p">},</span>
                            <span class="s1">&#39;#settings-email&#39;</span> <span class="o">:</span> <span class="p">{</span>
                                <span class="nx">required</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                                <span class="nx">message</span>  <span class="o">:</span> <span class="s1">&#39;Email is required&#39;</span><span class="p">,</span>
                                <span class="nx">test</span>     <span class="o">:</span> <span class="nx">happy</span><span class="p">.</span><span class="nx">email</span>
                            <span class="p">}</span>
                        <span class="p">},</span>
                        <span class="nx">submitButton</span> <span class="o">:</span> <span class="s1">&#39;#settings-submit&#39;</span><span class="p">,</span>
                        <span class="nx">unHappy</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                            <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Settings are unhappy. :(&#39;</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">});</span>
                <span class="p">})</span>
                <span class="p">.</span><span class="nx">draggable</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;input[name=&quot;displayname&quot;]&#39;</span><span class="p">).</span><span class="nx">focus</span><span class="p">();</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-79">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-79">&#182;</a>               </div>               <h3>saveSettings</h3>

<p>Save updated user settings</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">saveSettings</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
                <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="nx">bio</span>         <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;textarea[name=&quot;bio&quot;]&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="nx">email</span>       <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;input[name=&quot;email&quot;]&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="nx">password</span>    <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;input[name=&quot;password&quot;]&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="nx">displayName</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;input[name=&quot;displayname&quot;]&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
                <span class="p">};</span>
            
            <span class="err">ß</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">channel</span>  <span class="o">:</span> <span class="s1">&#39;app:users&#39;</span><span class="p">,</span>
                <span class="nx">finished</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">resp</span><span class="p">)</span> <span class="p">{</span>
                <span class="p">}</span>
            <span class="p">});</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">settingsDialog</span><span class="p">.</span><span class="nx">fadeOut</span><span class="p">(</span><span class="mi">150</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">overlay</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-80">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-80">&#182;</a>               </div>               <h3>saveSettingsOnEnter</h3>

<p>Create room keystroke listener</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">saveSettingsOnEnter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="mi">13</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">saveSettings</span><span class="p">();</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-81">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-81">&#182;</a>               </div>               <h3>showUsers</h3>

<p>Show the sidebar user list</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">showUsers</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">roomList</span><span class="p">.</span><span class="nx">fadeOut</span><span class="p">(</span><span class="mi">150</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">userList</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">150</span><span class="p">);</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-82">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-82">&#182;</a>               </div>               <h3>allUsers</h3>

<p>All rooms have been loaded into collection</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">allUsers</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">users</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">userList</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">addUser</span><span class="p">);</span>
            </pre></div>             </td>           </tr>                               <tr id="section-83">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-83">&#182;</a>               </div>               <p>Refresh model statistics</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">this</span><span class="p">.</span><span class="nx">statistics</span><span class="p">();</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-84">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-84">&#182;</a>               </div>               <h3>addUser</h3>

<p>Add a single room room to the current veiw</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">addUser</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">view</span> <span class="o">=</span> <span class="k">new</span> <span class="err">ß</span><span class="p">.</span><span class="nx">Views</span><span class="p">.</span><span class="nx">UserView</span><span class="p">({</span>
                <span class="nx">model</span> <span class="o">:</span> <span class="nx">user</span>
            <span class="p">}).</span><span class="nx">render</span><span class="p">();</span>
            
            <span class="k">this</span><span class="p">.</span><span class="nx">userList</span>
                <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">view</span><span class="p">.</span><span class="nx">el</span><span class="p">);</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-85">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-85">&#182;</a>               </div>               <h3>showLogin</h3>

<p>Show the login form</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">showLogin</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">hideDialogs</span><span class="p">();</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">overlay</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">150</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">loginDialog</span>
                <span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">Mustache</span><span class="p">.</span><span class="nx">to_html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">loginTemplate</span><span class="p">()))</span>
                <span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
                </pre></div>             </td>           </tr>                               <tr id="section-86">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-86">&#182;</a>               </div>               <p>Apply happy validation schema, this might be 
better placed and only accessed here, as the 
DOM elements must exist before they can be happy</p>             </td>             <td class="code">               <div class="highlight"><pre>                    <span class="nx">self</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#login-form&#39;</span><span class="p">).</span><span class="nx">isHappy</span><span class="p">({</span>
                        <span class="nx">fields</span> <span class="o">:</span> <span class="p">{</span>
                            <span class="s1">&#39;#login-username&#39;</span> <span class="o">:</span> <span class="p">{</span>
                                <span class="nx">required</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                                <span class="nx">message</span>  <span class="o">:</span> <span class="s1">&#39;Who are you again?&#39;</span>
                            <span class="p">},</span>
                            <span class="s1">&#39;#login-password&#39;</span> <span class="o">:</span> <span class="p">{</span>
                                <span class="nx">required</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                                <span class="nx">message</span>  <span class="o">:</span> <span class="s1">&#39;Password please&#39;</span>
                            <span class="p">}</span>
                        <span class="p">},</span>
                        <span class="nx">submitButton</span> <span class="o">:</span> <span class="s1">&#39;#login-submit&#39;</span><span class="p">,</span>
                        <span class="nx">unHappy</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                            <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Login is unhappy. :(&#39;</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">});</span>
                <span class="p">})</span>
                <span class="p">.</span><span class="nx">draggable</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;input[name=&quot;username&quot;]&#39;</span><span class="p">).</span><span class="nx">focus</span><span class="p">();</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-87">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-87">&#182;</a>               </div>               <h3>authenticate</h3>

<p>Authenticate the current user, check the credentials
sent on the ß.Server side, which will return the client 
data to update the default model with</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">authenticate</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
                <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="nx">username</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;input[name=&quot;username&quot;]&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="nx">password</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;input[name=&quot;password&quot;]&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
                <span class="p">},</span>
                <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="nx">token</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">sid</span><span class="p">,</span>
                    <span class="nx">error</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">code</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
                    <span class="p">},</span>
                <span class="p">};</span>
            
            <span class="err">ß</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">authenticate</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">resp</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">self</span><span class="p">.</span><span class="nx">toggleNav</span><span class="p">();</span>
            <span class="p">});</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">loginDialog</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">overlay</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-88">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-88">&#182;</a>               </div>               <h3>authenticateOnEnter</h3>

<p>Authentication keystroke listener</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">authenticateOnEnter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="mi">13</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">authenticate</span><span class="p">();</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-89">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-89">&#182;</a>               </div>               <h3>showSignup</h3>

<p>Show the login form</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">showSignup</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">hideDialogs</span><span class="p">();</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">overlay</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">150</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">signupDialog</span>
                <span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">Mustache</span><span class="p">.</span><span class="nx">to_html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">signupTemplate</span><span class="p">()))</span>
                <span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
                </pre></div>             </td>           </tr>                               <tr id="section-90">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-90">&#182;</a>               </div>               <p>Apply happy validation schema, this might be 
better placed and only accessed here, as the 
DOM elements must exist before they can be happy</p>             </td>             <td class="code">               <div class="highlight"><pre>                    <span class="nx">self</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#signup-form&#39;</span><span class="p">).</span><span class="nx">isHappy</span><span class="p">({</span>
                        <span class="nx">fields</span> <span class="o">:</span> <span class="p">{</span>
                            <span class="s1">&#39;#signup-username&#39;</span> <span class="o">:</span> <span class="p">{</span>
                                <span class="nx">required</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                                <span class="nx">message</span>  <span class="o">:</span> <span class="s1">&#39;What should we call you?&#39;</span>
                            <span class="p">},</span>
                            <span class="s1">&#39;#signup-email&#39;</span> <span class="o">:</span> <span class="p">{</span>
                                <span class="nx">required</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                                <span class="nx">message</span>  <span class="o">:</span> <span class="s1">&#39;We need a way to reach you&#39;</span><span class="p">,</span>
                                <span class="nx">test</span>     <span class="o">:</span> <span class="nx">happy</span><span class="p">.</span><span class="nx">email</span>
                            <span class="p">},</span>
                            <span class="s1">&#39;#signup-password&#39;</span> <span class="o">:</span> <span class="p">{</span>
                                <span class="nx">required</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                                <span class="nx">message</span>  <span class="o">:</span> <span class="s1">&#39;Password required&#39;</span><span class="p">,</span>
                                <span class="nx">test</span>     <span class="o">:</span> <span class="nx">happy</span><span class="p">.</span><span class="nx">minLength</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
                            <span class="p">}</span>
                        <span class="p">},</span>
                        <span class="nx">submitButton</span> <span class="o">:</span> <span class="s1">&#39;#signup-submit&#39;</span><span class="p">,</span>
                        <span class="nx">unHappy</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                            <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Signup is unhappy. :(&#39;</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">});</span>
                <span class="p">})</span>
                <span class="p">.</span><span class="nx">draggable</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;input[name=&quot;username&quot;]&#39;</span><span class="p">).</span><span class="nx">focus</span><span class="p">();</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-91">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-91">&#182;</a>               </div>               <h3>register</h3>

<p>Authenticate the current user, check the credentials
sent on the ß.Server side, which will return the client 
data to update the default model with</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">register</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
                <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="nx">username</span>    <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;input[name=&quot;username&quot;]&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="nx">displayName</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;input[name=&quot;displayname&quot;]&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="nx">email</span>       <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;input[name=&quot;email&quot;]&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="nx">password</span>    <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;input[name=&quot;password&quot;]&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                <span class="p">},</span>
                <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="nx">token</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">sid</span><span class="p">,</span>
                    <span class="nx">error</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">code</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
                    <span class="p">}</span>
                <span class="p">};</span>
            
            <span class="err">ß</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">resp</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">self</span><span class="p">.</span><span class="nx">toggleNav</span><span class="p">();</span>
            <span class="p">});</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">signupDialog</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">overlay</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-92">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-92">&#182;</a>               </div>               <h3>registerOnEnter</h3>

<p>Registration keystroke listener</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">registerOnEnter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="mi">13</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">register</span><span class="p">();</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-93">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-93">&#182;</a>               </div>               <h3>logout</h3>

<p>Destroy the current user object and restore original
navigation display</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">logout</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="err">ß</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">logout</span><span class="p">({</span>
                <span class="nx">token</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">sid</span>
            <span class="p">});</span>
            
            <span class="k">this</span><span class="p">.</span><span class="nx">friendList</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">favoriteList</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
            <span class="err">ß</span><span class="p">.</span><span class="nx">user</span> <span class="o">=</span> <span class="k">new</span> <span class="err">ß</span><span class="p">.</span><span class="nx">Models</span><span class="p">.</span><span class="nx">UserModel</span><span class="p">();</span>
            
            <span class="k">this</span><span class="p">.</span><span class="nx">conversationList</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
            <span class="err">ß</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">conversations</span> <span class="o">=</span> <span class="k">new</span> <span class="err">ß</span><span class="p">.</span><span class="nx">Models</span><span class="p">.</span><span class="nx">ConversationCollection</span><span class="p">();</span>
            
            <span class="k">this</span><span class="p">.</span><span class="nx">nav</span><span class="p">.</span><span class="nx">signup</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">150</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">nav</span><span class="p">.</span><span class="nx">login</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">150</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">nav</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">fadeOut</span><span class="p">(</span><span class="mi">150</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">nav</span><span class="p">.</span><span class="nx">logout</span><span class="p">.</span><span class="nx">fadeOut</span><span class="p">(</span><span class="mi">150</span><span class="p">);</span>
        <span class="p">},</span>
        
    <span class="p">});</span>
<span class="p">})(</span><span class="err">ß</span><span class="p">)</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 